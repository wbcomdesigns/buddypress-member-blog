jQuery(document).ready(function($){$("#bp-blog-category-select").selectize({placeholder:$("#bp-blog-category-select").data("placeholder"),plugins:["remove_button"]}),$("#bp-blog-tag-select").selectize({placeholder:$("#bp-blog-tag-select").data("placeholder"),plugins:["remove_button"]}),$(document).on("click",".bp-member-blog-container .post-actions a.confirm",function(){var message=bpmb_ajax_object.post_deleted_msg;return!!confirm(message)}),$("#custom-file-upload-button").on("click",function(){$("#bp_member_blog_post_featured_image").click()}),$(document).on("change","#bp_member_blog_post_featured_image",function(){console.log(this.files);var reader,file=this.files[0];file&&((reader=new FileReader).onload=function(event){$("#bp_member_post_img_preview").attr("src",event.target.result),$(".bp_member_blog_post_img_preview").show()},reader.readAsDataURL(file))}),$("#bp_member_blog_post_tag").keypress(function(e){var report_subject,tags_form,current_elts;13==(e.keyCode||e.which)&&(report_subject=$(this).val(),tags_form=$(".bpmb-post-tag-lists"),current_elts=$.bpmb_check_post_tags_existence(tags_form,report_subject),""!=$.trim(report_subject)&&0==current_elts.length?$(".bpmb-post-tag-lists").append('<li class="added-post-tag">'+report_subject+'<span class="bpmb-tag-remove">x</span><input type="hidden" value="'+report_subject+'" name="bp_member_blog_post_tag[]"></li>'):(current_elts.addClass("flash"),setTimeout(function(){current_elts.removeClass("flash")},1e3)),$(this).val(""),e.preventDefault())}),$.bpmb_check_post_tags_existence=function(elt,keyword){var tag_obj=$();return elt.find(".added-post-tag").each(function(){if($.trim($.trim($(this).text()).slice(0,-1)).toLowerCase()===$.trim(keyword).toLowerCase())return tag_obj=$(this),!1}),tag_obj},$(document).on("click",".bpmb-tag-remove",function(e){e.preventDefault(),$(this).parent().remove()}),jQuery(document).on("click",".add-bpmb-category",function(){jQuery(".add-bpmb-cat-row").slideToggle("slow"),5<jQuery(".add-bpmb-cat-row").css("height").match(/\d+/)[0]?jQuery(".add-bpmb-category span").attr("class","dashicons dashicons-plus"):jQuery(".add-bpmb-category span").attr("class","dashicons dashicons-minus")}),jQuery(document).on("click","#add-bpmb-cat",function(){var name=jQuery("#bpmb-category-name").val(),btn_text=jQuery(this).html();""==name?jQuery("#bpmb-category-name").addClass("bpbpmb-add-cat-empty").attr("placeholder",bpmb_ajax_object.required_cat_text):(jQuery(this).html(btn_text+' <i class="fa fa-refresh fa-spin"></i>'),jQuery.post(ajaxurl,{action:"bpmb_add_category_front_end",name:name,security_nonce:bpmb_ajax_object.ajax_nonce},function(response){if(response){if(!1===response.success)jQuery(".bp_member_blog_category_add_error_field").show(),jQuery(".add-bpmb-cat-row").hide();else if(!0===response.success){response=response.data.cat_id,jQuery(".add-bpmb-cat-row").hide(),jQuery(".bp_member_blog_category_add_error_field").hide(),jQuery("#bp-blog-category-select").append('<option value="'+response+'">'+name+"</option>");var presetvalue=jQuery("#bp-blog-category-select").val();if(""!=presetvalue){let selectedOptions=[];(selectedOptions=presetvalue.includes(",")?presetvalue.split(","):Array.isArray(presetvalue)?presetvalue:[presetvalue]).push(response),jQuery("#bp-blog-category-select")[0].selectize.addOption({text:name,value:response}),jQuery("#bp-blog-category-select")[0].selectize.setValue(selectedOptions)}else jQuery("#bp-blog-category-select")[0].selectize.addOption({text:name,value:response}),jQuery("#bp-blog-category-select")[0].selectize.setValue(response)}jQuery("#add-bpmb-cat").html(btn_text),jQuery("#bpmb-category-name").val(""),jQuery(".add-bpmb-category span").attr("class","dashicons dashicons-plus")}}))}),jQuery("#blog").each(function(){jQuery(this).append('<span class="publish_post_count">('+bpmb_ajax_object.publish_post_count+")</span>")}),jQuery("#pending").each(function(){jQuery(this).append('<span class="pending_post_count">('+bpmb_ajax_object.pending_post_count+")</span>")}),jQuery("#draft").each(function(){jQuery(this).append('<span class="draft_post_count">('+bpmb_ajax_object.draft_post_count+")</span>")})});